<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PortoFolio</title>
  <link rel="stylesheet" href="Web.css">
</head>
<body>
  <nav class="navbar">
    <div class="logo-text">Miftahul Tangguh</div>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Profile</a></li>
      <li><a href="#gallery-section">Gallery</a></li>
      <li><a href="#latihan-section">Latihan</a></li>
      <li><a href="#">Kontak</a></li>
    </ul>
  </nav>
 
  <section class="hero-section">
  <div class="profile-wrapper">
    <img id="profilePic" src="profile.jpg" alt="Foto Profil"
      class="profile-pic"
      onerror="this.src='https://via.placeholder.com/150?text=Foto+Profil'" />

    <p class="profile-caption">Shooting Guard ~ Call me +6281384398429</p>
  </div>

  <div class="edit-profile-pic">
    <form class="profile-form" id="profileForm">
      <label for="fotoProfile">Ganti Foto Profil</label>
      <input type="file" id="fotoProfile" accept="image/*" />
      <button type="submit">Simpan</button>
    </form>
  </div>

  <h1 id="profileName">MiftahulTangguh</h1>
  <p class="subtitle" id="profileDesc"> Basketball Player</p>

  <form class="profile-form" id="editProfileForm">
    <label for="namaProfile">Nama</label>
    <input type="text" id="namaProfile" value="Your Name" />
    <label for="descProfile">Deskripsi</label>
    <input type="text" id="descProfile" value="Your Job" />
    <button type="submit">Simpan Profil</button>
  </form>
</section>

 
  <section class="gallery-section" id="gallery-section">
  <h2>Gallery</h2>

  <!-- FOTO GALERI -->
  <div class="gallery-grid">
    <img id="galleryPic1" class="gallery-item"
      src="https://via.placeholder.com/200?text=Foto+1">
    <img id="galleryPic2" class="gallery-item"
      src="https://via.placeholder.com/200?text=Foto+2">
    <img id="galleryPic3" class="gallery-item"
      src="https://via.placeholder.com/200?text=Foto+3">
  </div>

  <!-- FORM EDIT GALERI -->
  <div class="edit-gallery">
    <form class="profile-form" id="galleryForm">
      <label for="galleryFile">Ganti Foto Galeri</label>
      <input type="file" id="galleryFile" accept="image/*" required>

      <select id="galleryIndex">
        <option value="0">Foto 1</option>
        <option value="1">Foto 2</option>
        <option value="2">Foto 3</option>
      </select>

      <button type="submit">Simpan Foto</button>
    </form>
  </div>
</section>

<!-- SCRIPT HARUS DI BAWAH -->
<script>
document.addEventListener("DOMContentLoaded", function () {

  const galleryPics = [
    document.getElementById("galleryPic1"),
    document.getElementById("galleryPic2"),
    document.getElementById("galleryPic3")
  ];

  const galleryForm = document.getElementById("galleryForm");
  const galleryFile = document.getElementById("galleryFile");
  const galleryIndex = document.getElementById("galleryIndex");

  // Load dari localStorage
  const savedGallery = JSON.parse(localStorage.getItem("galleryPics")) || [];
  savedGallery.forEach((src, i) => {
    if (galleryPics[i] && src) galleryPics[i].src = src;
  });

  galleryForm.addEventListener("submit", function (e) {
    e.preventDefault();

    const file = galleryFile.files[0];
    const index = galleryIndex.value;

    if (!file) return;

    const reader = new FileReader();
    reader.onload = function (ev) {
      galleryPics[index].src = ev.target.result;
      savedGallery[index] = ev.target.result;
      localStorage.setItem("galleryPics", JSON.stringify(savedGallery));
    };
    reader.readAsDataURL(file);

    galleryFile.value = "";
  });

});
</script>



<script>
  const uploadInput = document.getElementById("galleryUpload");
  const galleryGrid = document.getElementById("galleryGrid");

  uploadInput.addEventListener("change", function () {
    const files = Array.from(uploadInput.files).slice(0, 3);

    // Hapus isi lama
    galleryGrid.innerHTML = "";

    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = function (e) {
        const div = document.createElement("div");
        div.className = "gallery-item";

        const img = document.createElement("img");
        img.src = e.target.result;
        img.style.width = "100%";
        img.style.height = "100%";
        img.style.objectFit = "cover";

        div.appendChild(img);
        galleryGrid.appendChild(div);
      };
      reader.readAsDataURL(file);
    });
  });
</script>
 
  <section class="latihan-section" id="latihan-section">
    <h2>Latihan</h2>
    <form class="upload-form" id="uploadForm">
      <label for="latihanTitle">Judul Latihan</label>
      <input type="text" id="latihanTitle" placeholder="Judul latihan ..." required />
      <label for="latihanFile">Upload File Latihan</label>
      <input type="file" id="latihanFile" required />
      <button type="submit">Upload Latihan</button>
    </form>
    <ul class="latihan-list" id="latihanList"></ul>
  </section>
 
  <script>
    // Ganti foto profil preview
    const fotoProfile = document.getElementById('fotoProfile');
    const profilePic = document.getElementById('profilePic');
    let currentProfileImg = localStorage.getItem('profileImg');
    if(currentProfileImg) profilePic.src = currentProfileImg;
    fotoProfile.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if(file) {
        const reader = new FileReader();
        reader.onload = function(ev) {
          profilePic.src = ev.target.result;
          localStorage.setItem('profileImg', ev.target.result);
        };
        reader.readAsDataURL(file);
      }
    });
    // Profil Nama & Desc
    const profileName = document.getElementById('profileName');
    const profileDesc = document.getElementById('profileDesc');
    const namaProfileInp = document.getElementById('namaProfile');
    const descProfileInp = document.getElementById('descProfile');
    if(localStorage.getItem('profileName')) profileName.textContent = localStorage.getItem('profileName');
    if(localStorage.getItem('profileDesc')) profileDesc.textContent = localStorage.getItem('profileDesc');
    document.getElementById('editProfileForm').addEventListener('submit', function(e) {
      e.preventDefault();
      profileName.textContent = namaProfileInp.value;
      profileDesc.textContent = descProfileInp.value;
      localStorage.setItem('profileName', namaProfileInp.value);
      localStorage.setItem('profileDesc', descProfileInp.value);
    });
    // Upload latihan file daftar (hanya preview/download di browser)
    const latihanList = document.getElementById('latihanList');
    if(localStorage.getItem('latihanFiles')) {
      latihanList.innerHTML = localStorage.getItem('latihanFiles');
    }
    document.getElementById('uploadForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const title = document.getElementById('latihanTitle').value.trim();
      const fileInput = document.getElementById('latihanFile');
      const file = fileInput.files[0];
      if(title && file) {
        const reader = new FileReader();
        reader.onload = function(ev) {
          const li = document.createElement('li');
          const download = document.createElement('a');
          download.href = ev.target.result;
          download.download = file.name;
          download.textContent = title + " (" + file.name.split('.').pop().toUpperCase() + ")";
          li.appendChild(download);
          latihanList.appendChild(li);
          localStorage.setItem('latihanFiles', latihanList.innerHTML);
        }
        reader.readAsDataURL(file);
        fileInput.value = "";
        document.getElementById('latihanTitle').value = "";
      }
    });
  </script>
</body>
</html>